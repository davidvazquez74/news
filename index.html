<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="color-scheme" content="dark">
  <title>News</title>
  <meta name="theme-color" content="#0b0c0f">
  <link rel="manifest" href="manifest.webmanifest?v=3209">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png?v=3209">
  <link rel="icon" href="icons/favicon.ico?v=3209">
  <link rel="stylesheet" href="styles.v3209.css">
</head>
<body class="dark">
  <header class="app-header">
    <div class="brand">
      <h1>Noticias</h1>
      <span id="versionBadge">—</span>
    </div>
    <div class="segmented" role="tablist" aria-label="Controles">
      <button id="refreshBtn" role="tab" aria-selected="false">Forzar actualización</button>
      <button id="adultBtn" role="tab" aria-selected="true">Adulto</button>
      <button id="teenToggle" role="tab" aria-selected="false">Teens</button>
    </div>
  </header>

  <main>
    <p id="updatedAt" class="muted top-note">Actualizando…</p>

    <section><h2>Cataluña</h2><ul id="list-cataluna" class="news-list"></ul></section>
    <section><h2>España</h2><ul id="list-espana" class="news-list"></ul></section>
    <section><h2>La Rioja</h2><ul id="list-rioja" class="news-list"></ul></section>
    <section><h2 id="local-title">Local</h2><ul id="list-local" class="news-list"></ul><p id="geoNote" class="muted small"></p></section>
    <section><h2>Global</h2><ul id="list-background" class="news-list"></ul></section>
  </main>

  <footer class="app-footer">
    <small><a href="#" id="forceCacheClear">Limpiar caché</a> • Fuentes verificadas</small>
  </footer>

  <script src="main.v3209.js" defer></script>
  <script>
    // Cargar versión dinámica desde meta.json
    fetch("/data/meta.json?t=" + Date.now())
      .then(r => r.json())
      .then(meta => {
        const el = document.getElementById("versionBadge");
        if (el) el.textContent = meta.version ? meta.version : "—";
      })
      .catch(() => {
        const el = document.getElementById("versionBadge");
        if (el) el.textContent = "—";
      });
  </script>
</body>
</html>
